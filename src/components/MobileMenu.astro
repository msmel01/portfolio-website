---
interface Props {
	links: Array<{ href: string; label: string }>;
}

const { links } = Astro.props;
---

<ul class="mobile-menu" id="mobile-menu">
	{links.map((link) => (
		<li>
			<a href={link.href}>{link.label}</a>
		</li>
	))}
</ul>

<script>
	const hamburger = document.getElementById('hamburger');
	const mobileMenu = document.getElementById('mobile-menu');

	if (hamburger && mobileMenu) {
		function toggleMenu(isActive: boolean) {
			if (isActive) {
				document.body.classList.add('menu-open');
			} else {
				document.body.classList.remove('menu-open');
			}
		}

		hamburger.addEventListener('click', () => {
			const isActive = hamburger.classList.toggle('active');
			mobileMenu.classList.toggle('active');
			toggleMenu(isActive);
		});

		// Close menu when clicking on a link
		const navLinks = mobileMenu.querySelectorAll('a');
		navLinks.forEach(link => {
			link.addEventListener('click', () => {
				hamburger.classList.remove('active');
				mobileMenu.classList.remove('active');
				toggleMenu(false);
			});
		});

		// Close menu when clicking outside
		document.addEventListener('click', (e) => {
			const target = e.target as Node | null;
			if (target && !mobileMenu.contains(target) && !hamburger.contains(target)) {
				hamburger.classList.remove('active');
				mobileMenu.classList.remove('active');
				toggleMenu(false);
			}
		});
	}
</script>

<style>
	.mobile-menu {
		display: none;
	}

	/* Mobile styles */
	@media screen and (max-width: 768px) {
		.mobile-menu {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100vh;
			background: rgba(255, 255, 255, 0.98);
			backdrop-filter: blur(10px);
			flex-direction: column;
			justify-content: center;
			align-items: center;
			padding: 0;
			gap: 2rem;
			box-shadow: none;
			transition: opacity 0.3s ease, visibility 0.3s ease;
			border-bottom: none;
			opacity: 0;
			visibility: hidden;
			list-style: none;
			margin: 0;
			z-index: 1000;
		}

		.mobile-menu.active {
			opacity: 1;
			visibility: visible;
			display: flex;
		}

		.mobile-menu li {
			width: auto;
			padding: 0;
			border-bottom: none;
		}

		.mobile-menu a {
			display: block;
			font-size: 1.5rem;
			text-align: center;
			text-decoration: none;
			color: #111827;
			font-weight: 500;
			transition: color 0.2s;
		}

		.mobile-menu a:hover {
			color: #4b5563;
		}
	}
</style>

